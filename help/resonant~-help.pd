#N canvas 429 80 559 619 10;
#X obj 4 318 cnv 3 550 3 empty empty inlets 8 12 0 13 -228856 -1 0
;
#X obj 4 468 cnv 3 550 3 empty empty outlets 8 12 0 13 -228856 -1 0
;
#X obj 4 501 cnv 3 550 3 empty empty arguments 8 12 0 13 -228856 -1
0;
#X obj 4 581 cnv 15 552 21 empty empty empty 20 12 0 14 -233017 -33289
0;
#X obj 92 477 cnv 17 3 17 empty empty 0 5 9 0 16 -228856 -162280 0
;
#X obj 92 326 cnv 17 3 88 empty empty 0 5 9 0 16 -228856 -162280 0
;
#X text 152 326 signal;
#X text 152 477 signal;
#X obj 216 249 else/out~;
#X obj 2 3 cnv 15 301 42 empty empty resonant~ 20 20 2 37 -233017 -1
0;
#X obj 306 4 cnv 15 250 40 empty empty empty 12 13 0 18 -128992 -233080
0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 302 42 1;
#X restore 2 3 graph;
#N canvas 382 141 749 319 (subpatch) 0;
#X coords 0 -1 1 1 252 42 2 0 0;
#X restore 305 3 pd;
#X obj 345 11 cnv 10 10 10 empty empty ELSE 0 15 2 30 -128992 -233080
0;
#X obj 23 40 cnv 4 4 4 empty empty Bandpass 0 28 2 18 -233017 -1 0
;
#X obj 169 40 cnv 4 4 4 empty empty filter 0 28 2 18 -233017 -1 0;
#X obj 458 11 cnv 10 10 10 empty empty EL 0 6 2 13 -128992 -233080
0;
#X obj 478 11 cnv 10 10 10 empty empty Locus 0 6 2 13 -128992 -233080
0;
#X obj 464 26 cnv 10 10 10 empty empty ELSE 0 6 2 13 -128992 -233080
0;
#X obj 99 40 cnv 4 4 4 empty empty resonant 0 28 2 18 -233017 -1 0
;
#X obj 92 421 cnv 17 3 17 empty empty 1 5 9 0 16 -228856 -162280 0
;
#X obj 92 444 cnv 17 3 17 empty empty 2 5 9 0 16 -228856 -162280 0
;
#X text 116 421 float/signal;
#X text 116 444 float/signal;
#X text 158 344 clear;
#X text 104 362 bypass <float>;
#X text 201 362 - 1 (bypasses input signal) or 0 (doesn't bypass);
#N canvas 280 141 926 617 filter 0;
#N canvas 167 73 1108 572 (subpatch) 0;
#N canvas 570 76 460 420 plot 0;
#N canvas 884 142 608 408 init 0;
#X obj 68 46 loadbang;
#X obj 105 353 s \$0-dbrange;
#X obj 207 114 v sr_\$0;
#X msg 142 289 400;
#X text 172 289 array size;
#X obj 68 82 trigger b b b;
#X msg 105 320 24;
#X obj 198 193 v midi_range_\$0;
#X obj 198 167 ftom;
#X msg 198 141 8750.55;
#X obj 191 255 v pi_\$0;
#N canvas 760 51 502 549 get-freq 0;
#X msg 211 218 resize \$1;
#X obj 88 66 change;
#X obj 230 157 v table_size_\$0;
#X obj 88 99 trigger bang float;
#X obj 211 192 change 400;
#X obj 88 29 inlet;
#N canvas 192 80 935 668 loop 0;
#X obj 106 192 until;
#X obj 144 241 + 1;
#X msg 124 216 0;
#X obj 106 95 t f f;
#X obj 483 216 until;
#X obj 529 265 + 1;
#X msg 501 241 0;
#X obj 106 270 t f f;
#X obj 211 355 +;
#X obj 106 370 mtof;
#X obj 106 144 t f b f;
#X obj 483 191 t f b f;
#X obj 483 326 /;
#X obj 106 31 inlet;
#X obj 106 574 outlet;
#X obj 259 583 outlet;
#X obj 483 144 expr table_size_\$0 - $f1;
#X obj 483 265 f;
#X obj 483 379 expr pow($f1 \, 0.4);
#X obj 106 241 f;
#X obj 483 296 trigger f f;
#X obj 106 63 expr rint(table_size_\$0 * 0.98);
#X obj 483 407 * 20.6017;
#X text 556 407 MIDI 16;
#X obj 106 298 expr (($f1 + 1) * (midi_range_\$0 / $f2)) + 16;
#X obj 106 465 expr $f1 * (2 * pi_\$0) / 44100;
#X obj 483 498 expr $f1 * (2 * pi_\$0) / 44100;
#X connect 0 0 19 0;
#X connect 1 0 19 1;
#X connect 2 0 19 1;
#X connect 3 0 10 0;
#X connect 3 1 16 0;
#X connect 4 0 17 0;
#X connect 5 0 17 1;
#X connect 6 0 17 1;
#X connect 7 0 24 0;
#X connect 7 1 8 0;
#X connect 8 0 15 0;
#X connect 9 0 25 0;
#X connect 10 0 0 0;
#X connect 10 1 2 0;
#X connect 10 2 24 1;
#X connect 11 0 4 0;
#X connect 11 1 6 0;
#X connect 11 2 12 1;
#X connect 12 0 18 0;
#X connect 13 0 21 0;
#X connect 16 0 8 1;
#X connect 16 0 11 0;
#X connect 17 0 5 0;
#X connect 17 0 20 0;
#X connect 18 0 22 0;
#X connect 19 0 1 0;
#X connect 19 0 7 0;
#X connect 20 0 12 0;
#X connect 20 1 15 0;
#X connect 21 0 3 0;
#X connect 22 0 26 0;
#X connect 24 0 9 0;
#X connect 25 0 14 0;
#X connect 26 0 14 0;
#X restore 88 129 pd loop;
#X obj 211 257 s freq_\$0;
#X obj 73 280 expr cos($f1) \; sin($f1) \; cos($f1 * 2) \; sin($f1
* 2) \; $f2;
#X obj 66 433 tabwrite sinW_\$0;
#X obj 99 461 tabwrite cos2W_\$0;
#X obj 35 397 tabwrite cosW_\$0;
#X obj 131 492 tabwrite sin2W_\$0;
#X connect 0 0 7 0;
#X connect 1 0 3 0;
#X connect 3 0 6 0;
#X connect 3 1 2 0;
#X connect 3 1 4 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 6 0 8 0;
#X connect 6 1 8 1;
#X connect 8 0 11 0;
#X connect 8 1 9 0;
#X connect 8 2 10 0;
#X connect 8 3 12 0;
#X connect 8 4 9 1;
#X connect 8 4 10 1;
#X connect 8 4 11 1;
#X connect 8 4 12 1;
#X restore 142 317 pd get-freq;
#X obj 353 233 table sin2W_\$0 400;
#X obj 353 208 table cos2W_\$0 400;
#X obj 354 171 table sinW_\$0 400;
#X obj 354 146 table cosW_\$0 400;
#X obj 190 224 else/pi;
#X obj 207 91 else/sr~;
#X msg 28 229 500;
#X msg 56 161 1;
#X obj 28 256 s \$0-Hz-set;
#X obj 56 188 s \$0-Q-set;
#X connect 0 0 5 0;
#X connect 3 0 11 0;
#X connect 5 0 19 0;
#X connect 5 0 18 0;
#X connect 5 1 3 0;
#X connect 5 1 6 0;
#X connect 5 2 9 0;
#X connect 5 2 16 0;
#X connect 5 2 17 0;
#X connect 6 0 1 0;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 16 0 10 0;
#X connect 17 0 2 0;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X restore 246 150 pd init \; tables;
#X obj 161 228 trigger float float;
#N canvas 284 136 498 434 H(z) 0;
#X obj 106 40 inlet;
#X obj 222 42 inlet;
#X text 153 41 index;
#X obj 106 278 /;
#X obj 225 264 -;
#N canvas 121 22 226 277 db-range 0;
#X obj 42 31 inlet;
#X obj 42 61 rmstodb;
#X obj 42 90 - 100;
#X obj 98 61 r \$0-dbrange;
#X obj 108 109 * -1;
#X obj 41 147 clip;
#X obj 80 183 /;
#X obj 80 216 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 3 0 5 2;
#X connect 3 0 6 1;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X restore 106 315 pd db-range;
#X obj 225 286 expr $f1 / pi_\$0;
#X obj 106 384 outlet;
#X obj 225 384 outlet;
#X obj 106 110 list;
#X text 261 42 coeficientes;
#X obj 106 145 expr $f4 + ($f5 * cosW_\$0[$f1]) + ($f6 * cos2W_\$0[$f1])
\; ($f5 * sinW_\$0[$f1]) + ($f6 * sin2W_\$0[$f1]) \; 1 - ($f2 * cosW_\$0[$f1])
- ($f3 * cos2W_\$0[$f1]) \; 0 - ($f2 * sinW_\$0[$f1]) - ($f3 * sin2W_\$0[$f1])
;
#X obj 225 335 wrap;
#X obj 225 314 expr ($f1 + 1) * 0.5;
#X obj 225 357 expr $f1 * 2 - 1;
#X obj 268 210 expr sqrt($f1*$f1 + $f2*$f2) \; atan2($f2 \, $f1);
#X obj 46 215 expr sqrt($f1*$f1 + $f2*$f2) \; atan2($f2 \, $f1);
#X connect 0 0 9 0;
#X connect 1 0 9 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 13 0;
#X connect 9 0 11 0;
#X connect 11 0 16 0;
#X connect 11 1 16 1;
#X connect 11 2 15 0;
#X connect 11 3 15 1;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 14 0 8 0;
#X connect 15 0 3 1;
#X connect 15 1 4 1;
#X connect 16 0 3 0;
#X connect 16 1 4 0;
#X restore 161 255 pd H(z);
#X obj 101 170 trigger bang list;
#X obj 161 285 tabwrite \$0-amp;
#X obj 179 321 tabwrite \$0-fase;
#N canvas 192 57 804 419 coeficientes 0;
#X obj 71 63 inlet;
#X obj 207 61 inlet;
#X obj 71 223 s \$0-get-coeff;
#X obj 207 129 t b f;
#X obj 234 153 v Q;
#X obj 98 183 v w;
#X obj 71 159 t b f;
#X obj 207 189 s \$0-get-coeff;
#X text 58 35 Freq (Hz);
#X obj 207 96 max 0;
#X obj 252 260 pack float float float 0 float;
#X obj 455 259 v b0;
#X obj 494 260 v alphaQ;
#X obj 336 81 r \$0-get-coeff;
#X obj 252 298 outlet;
#X obj 71 121 else/hz2rad;
#X text 214 34 Q;
#X obj 71 88 clip;
#X obj 107 90 else/nyquist~;
#X text 470 94 RESONANT \; - b1 = 2*cos(w) / b0 \; - b2 = (alphaQ -
1) / b0 \; - a0 = alphaQ * Q/ b0 \; - a1 = 0 \; - a2 = -alphaQ * Q
/ b0 \; - b0 = alphaQ + 1 \; - alphaQ = sin(w) / (2*Q);
#X obj 336 120 expr 2*cos(w) / b0 \; (alphaQ - 1) / b0 \; alphaQ *
Q/ b0 \; 0 \; -alphaQ * Q / b0 \; alphaQ + 1 \; sin(w) / (2*Q);
#X connect 0 0 17 0;
#X connect 1 0 9 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 6 0 2 0;
#X connect 6 1 5 0;
#X connect 9 0 3 0;
#X connect 10 0 14 0;
#X connect 13 0 20 0;
#X connect 15 0 6 0;
#X connect 17 0 15 0;
#X connect 18 0 17 2;
#X connect 20 0 10 0;
#X connect 20 1 10 1;
#X connect 20 2 10 2;
#X connect 20 3 10 3;
#X connect 20 4 10 4;
#X connect 20 5 11 0;
#X connect 20 6 12 0;
#X restore 101 142 pd coeficientes;
#N canvas 158 86 450 300 uzi 0;
#X obj 219 154 until;
#X msg 219 131 400;
#X obj 261 154 v i;
#X obj 227 103 t b b;
#X msg 261 132 0;
#X obj 219 182 expr i = i + 1 \; i;
#X obj 227 79 inlet;
#X obj 305 219 outlet;
#X connect 0 0 5 0;
#X connect 1 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 4 0;
#X connect 4 0 2 0;
#X connect 5 1 7 0;
#X connect 6 0 3 0;
#X restore 101 197 pd uzi;
#X obj 188 116 r \$0-Q;
#X obj 101 114 r \$0-Hz;
#X connect 1 0 2 0;
#X connect 1 1 4 1;
#X connect 1 1 5 1;
#X connect 2 0 4 0;
#X connect 2 1 5 0;
#X connect 3 0 7 0;
#X connect 3 1 2 1;
#X connect 6 0 3 0;
#X connect 7 0 1 0;
#X connect 8 0 6 1;
#X connect 9 0 6 0;
#X restore 323 55 pd plot;
#X obj 101 101 cnv 15 898 288 empty empty empty 18 9 1 15 -262144 -1
0;
#X obj 153 109 cnv 15 805 235 empty empty empty 20 12 0 14 -1 -66577
0;
#X obj 488 366 cnv 15 15 15 empty empty Kilohertz 18 9 1 16 -262144
-1 0;
#X obj 157 314 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 157 258 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 157 286 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#X obj 157 230 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#N canvas 391 118 975 563 (subpatch) 0;
#X array \$0-fase 400 float 1;
#A 0 0 -0.0614359 -0.0395068 -0.027708 -0.0196959 -0.0139573 -0.00870323
-0.00509518 -0.000545561 0.00033462 0.0018121 0.0028311 0.00401318
0.00515628 0.00606525 0.0073148 0.00815415 0.0100557 0.010995 0.0120704
0.0131074 0.0144466 0.0155674 0.016647 0.0178406 0.0191538 0.0200984
0.0214658 0.0223299 0.0237459 0.0248163 0.026268 0.0275234 0.0287259
0.0300156 0.0311158 0.032299 0.0336876 0.034768 0.0360448 0.0373873
0.0390241 0.0402465 0.0415254 0.04275 0.0442443 0.0453545 0.0467271
0.048346 0.0497928 0.0510762 0.052492 0.0537483 0.0554135 0.056911
0.0584276 0.0599627 0.0613387 0.0629886 0.064476 0.0659736 0.0675607
0.0692263 0.0708883 0.072397 0.0741254 0.0758405 0.0775431 0.0790918
0.0809031 0.0826912 0.0843899 0.0861936 0.0880333 0.0900245 0.0917357
0.0935947 0.0955287 0.0974768 0.0994349 0.101345 0.103366 0.105232
0.1073 0.109408 0.111453 0.113577 0.115637 0.117809 0.119954 0.122241
0.12432 0.126573 0.128824 0.131187 0.133495 0.135752 0.138027 0.140425
0.142828 0.145196 0.147629 0.150148 0.152619 0.155069 0.157647 0.160164
0.162732 0.165258 0.167879 0.170502 0.173121 0.175783 0.178477 0.181127
0.183843 0.18657 0.189303 0.192076 0.19484 0.19761 0.200359 0.203158
0.205997 0.20883 0.211616 0.214487 0.217347 0.220178 0.223046 0.225928
0.228789 0.23169 0.234568 0.237442 0.240368 0.243263 0.246142 0.249023
0.251931 0.254812 0.257681 0.26058 0.263442 0.266297 0.269174 0.272018
0.274851 0.277703 0.280517 0.283334 0.286136 0.288924 0.291683 0.294451
0.297206 0.29993 0.302648 0.305341 0.308027 0.310689 0.313336 0.315963
0.318566 0.321149 0.323718 0.326261 0.328778 0.331279 0.333763 0.336215
0.338643 0.34105 0.343439 0.345798 0.348136 0.350453 0.352737 0.354997
0.357238 0.359452 0.361633 0.363796 0.365936 0.368045 0.370133 0.372189
0.374223 0.376229 0.378214 0.380172 0.382104 0.384009 0.38589 0.387745
0.389577 0.391381 0.393162 0.394916 0.39665 0.398356 0.400038 0.401697
0.403329 0.40494 0.406526 0.40809 0.40963 0.411147 0.41264 0.414113
0.415562 0.41699 0.418394 0.419776 0.42114 0.422481 0.4238 0.4251 0.426379
0.427637 0.428876 0.430095 0.431294 0.432476 0.433636 0.434779 0.435903
0.437009 0.438097 0.439167 0.44022 0.441255 0.442274 0.443276 0.444261
0.445229 0.446182 0.44712 0.448041 0.448948 0.449838 0.450715 0.451576
0.452423 0.453256 0.454075 0.454881 0.455672 0.45645 0.457216 0.457968
0.458707 0.459434 0.460149 0.460852 0.461542 0.462222 0.462889 0.463545
0.464191 0.464824 0.465448 0.46606 0.466662 0.467254 0.467836 0.468408
0.468971 0.469523 0.470066 0.4706 0.471125 0.471641 0.472148 0.472647
0.473137 0.473618 0.474092 0.474557 0.475015 0.475465 0.475906 0.476341
0.476768 0.477188 0.477601 0.478007 0.478406 0.478798 0.479183 0.479562
0.479935 0.480301 0.480662 0.481016 0.481364 0.481706 0.482043 0.482374
0.482699 0.483019 0.483334 0.483644 0.483948 0.484247 0.484541 0.484831
0.485116 0.485396 0.485671 0.485942 0.486208 0.486471 0.486729 0.486982
0.487232 0.487478 0.48772 0.487957 0.488191 0.488422 0.488649 0.488872
0.489092 0.489308 0.489521 0.48973 0.489937 0.49014 0.49034 0.490538
0.490732 0.490923 0.491112 0.491297 0.49148 0.491661 0.491838 0.492014
0.492186 0.492357 0.492525 0.49269 0.492854 0.493015 0.493174 0.493331
0.493486 0.493639 0.49379 0.493939 0.494086 0.494232 0.494375 0.494518
0.494658 0.494797 0.494935 0.495071 0.495205 0.495338 0.49547 0.495601
0.49573 0.495859 0.495986 0.496112 0.496237 0.496361 0.496485 0.496607
0.496729 0.49685 0.496971 0.49709 0.49721 0.497329 0.497447 0.497565
0.497683 0.497801 0.497918 0.498036 0.498154 0.498272 0.49839 0.498508
0.498627 0.498746 0.498866 0.498987 0.499109 0.499232 0.499356 0.499481
0.499608 0.499737 0.499867 -0.5;
#X coords 0 1 399 -1 800 111 1;
#X restore 156 230 graph;
#X obj 157 198 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 157 142 cnv 15 798 27 empty empty empty 20 12 0 14 -257983 -66577
0;
#X text 261 344 0.05;
#X text 161 344 0.02;
#X obj 157 170 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#X text 862 343 10;
#X text 939 344 20;
#X text 787 343 5;
#X text 684 343 2;
#X text 606 344 1;
#X text 520 344 0.5;
#X text 418 344 0.2;
#X text 338 344 0.1;
#X text 962 215 -24;
#X text 969 163 0;
#X obj 114 176 cnv 15 15 15 empty empty dB 0 9 1 17 -262144 -1 0;
#X text 963 192 -12;
#X obj 157 114 cnv 15 798 27 empty empty empty 20 12 0 14 -241340 -66577
0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 100 227 1;
#X restore 174 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 77 227 1;
#X restore 274 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 80 227 1;
#X restore 351 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 102 227 1;
#X restore 431 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 533 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 611 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 103 227 1;
#X restore 689 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 792 114 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 227 1;
#X restore 870 114 graph;
#N canvas 391 118 975 563 (subpatch) 0;
#X array \$0-amp 400 float 1;
#A 0 -1 -0.840119 -0.836127 -0.834704 -0.834026 -0.83368 -0.833467
-0.833381 -0.833334 -0.833335 -0.83334 -0.833349 -0.833362 -0.833382
-0.8334 -0.833428 -0.833454 -0.833511 -0.833546 -0.833592 -0.833642
-0.833705 -0.833764 -0.833827 -0.833903 -0.833986 -0.834054 -0.834156
-0.834223 -0.834342 -0.834435 -0.834565 -0.834689 -0.834809 -0.834944
-0.835067 -0.835199 -0.835364 -0.835496 -0.835661 -0.835835 -0.836057
-0.836232 -0.836422 -0.836608 -0.836837 -0.837018 -0.837247 -0.837524
-0.837777 -0.838013 -0.838275 -0.838518 -0.838845 -0.839147 -0.839465
-0.839791 -0.840093 -0.840466 -0.840809 -0.841163 -0.841546 -0.841959
-0.842384 -0.842776 -0.843235 -0.843702 -0.844179 -0.844625 -0.845152
-0.845684 -0.846206 -0.84677 -0.847357 -0.848003 -0.848577 -0.849208
-0.849881 -0.850574 -0.851287 -0.851997 -0.85276 -0.853483 -0.854299
-0.855146 -0.855989 -0.856879 -0.857759 -0.858708 -0.859664 -0.860701
-0.861668 -0.862733 -0.863819 -0.864979 -0.866139 -0.867294 -0.868484
-0.869757 -0.871059 -0.872369 -0.873738 -0.875185 -0.87663 -0.878097
-0.879663 -0.881221 -0.882843 -0.884473 -0.886191 -0.887944 -0.88973
-0.891576 -0.893481 -0.895388 -0.897383 -0.899423 -0.901504 -0.903657
-0.905844 -0.908074 -0.910333 -0.912671 -0.915086 -0.917542 -0.920007
-0.922589 -0.92521 -0.92785 -0.930576 -0.933366 -0.936186 -0.939098
-0.942041 -0.945036 -0.948137 -0.95126 -0.954428 -0.957656 -0.960969
-0.964314 -0.967709 -0.971199 -0.974709 -0.978275 -0.98193 -0.985615
-0.98935 -0.993174 -0.997023 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1;
#X coords 0 1 399 -1 800 113 1;
#X restore 156 114 graph;
#X obj 106 162 cnv 15 15 15 empty empty Amp 0 0 1 17 -262144 -1 0;
#X obj 102 276 cnv 15 15 15 empty empty Phase 0 0 1 17 -262144 -1 0
;
#X text 967 331 -pi;
#X text 966 305 -pi/2;
#X text 966 275 0;
#X text 966 248 pi/2;
#X text 967 226 pi;
#X obj 109 296 cnv 15 15 15 empty empty rad 0 0 1 17 -262144 -1 0;
#X text 964 133 12;
#X text 966 108 24;
#X obj 101 101 cnv 8 888 8 empty empty empty 18 9 1 15 -262144 -1 0
;
#X coords 0 -1 1 1 900 290 2 100 100;
#X restore 11 280 pd;
#X obj 683 101 hsl 128 15 0.1 100 1 0 empty \$0-Q-set empty -2 -8 0
10 -228856 -1 -1 0 1;
#X obj 615 75 hsl 128 15 20 20000 1 0 empty \$0-Hz-set empty -2 -8
0 10 -228856 -1 -1 100 1;
#X obj 545 111 noise~;
#X obj 527 183 else/out~;
#X text 55 92 y[n] = a0 * x[n] + a2 * x[n-2] + b1 * y[n-1] + b2 * y[n-2]
;
#X text 61 118 a0 \, a2 \, b1 and b2 are calculated as a function of
center frequency 'f' in hz and 'q' as follows \;;
#X obj 680 125 nbx 6 14 0.1 100 0 0 \$0-Q empty empty 0 -8 0 10 -228856
-1 -1 0.1 256;
#X obj 612 101 nbx 6 14 20 20000 0 0 \$0-Hz empty empty 0 -8 0 10 -228856
-1 -1 21.118 256;
#X text 54 46 The equation is from the "Cookbook formulae for audio
EQ biquad filter coefficients" by Robert Bristow-Johnsonc [1] \, and
it is:;
#X text 50 249 [1] found in http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt
, f 65;
#X text 632 75 center frequency;
#X text 704 101 resonance (Q);
#X text 53 13 This filter has zeroes fixes at +1 and -1 on the z-plane
\, which means both 0Hz and Nyquist are always filtered out.;
#X text 712 151 Note: a 'q' value of 0 bypasses the input., f 21;
#X text 502 18 Change the parameters and check the filter response
below. The graph considers a sample rate of 44.1Khz.;
#X text 700 187 same is true for t60 = 0;
#X text 82 145 omega = f * PI/nyquist \; alphaQ = sin(omega) / (2*q)
\; b0 = alphaQ + 1 \; a0 = alphaQ * q / b0 \; a2 = -a0 \; b1 = 2*cos(omega)
/ b0 \; b2 = (alphaQ - 1) / b0 \;;
#X obj 545 150 else/resonant~ 500 1 -q;
#X connect 1 0 7 0;
#X connect 2 0 8 0;
#X connect 3 0 18 0;
#X connect 7 0 18 2;
#X connect 8 0 18 1;
#X connect 18 0 4 0;
#X connect 18 0 4 1;
#X restore 432 223 pd filter formula \; and response;
#X text 200 420 - central frequency in Hertz;
#X text 128 509 1) float - central frequency in Hertz (default 0);
#X text 201 344 - clears filter's memory if you blow it up;
#X text 182 396 q;
#X obj 3 552 cnv 3 550 3 empty empty flags 8 12 0 13 -228856 -1 0;
#N canvas 783 164 407 314 resonance 0;
#X obj 127 242 else/out~;
#X obj 127 147 noise~;
#X msg 189 172 q;
#X text 217 173 resonance as 'q';
#X msg 180 148 t60;
#X text 27 17 By default \, the resonance parameter is the filter 't60'
\, whic is the time in ms for an excitation signal (such as an impulse)
decays 60dB. But you can also set the parameter value to be the 'q'
of the filter with the -q flag.;
#X text 27 75 Alternatively \, you can switch from 'q' to 't60' with
the message methods.;
#X text 207 148 resonance as 't60' in ms;
#X msg 57 172 bypass \$1;
#X obj 57 148 tgl 15 0 empty empty empty 17 7 0 10 -228856 -1 -1 0
1;
#X obj 127 202 else/resonant~ 500 150 -q;
#X connect 1 0 10 0;
#X connect 2 0 10 0;
#X connect 4 0 10 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 10 0 0 0;
#X connect 10 0 0 1;
#X restore 467 198 pd resonance;
#X text 210 60 (constant skirt);
#X obj 216 180 else/trigate~;
#X obj 216 153 bng 15 250 50 0 empty empty empty 17 7 0 10 -228856
-1 -1;
#X text 59 90 [resonant~] is a resonator that you can specify a decay
time in ms \, or a Q factor. Like [bandpass~] \, it is a 2nd order
bandpass resonant filter \, but where changing the Q increases the
gain of the filter.;
#X text 201 326 - signal to be filtered or excite the resonator;
#X text 238 152 <= excite the resonator;
#X text 170 379 t60;
#X text 201 379 - sets resonance parameter in decay time in ms (default)
;
#X text 201 396 - sets resonance parameter to Q;
#X text 201 444 - resonance (T60 decay time in ms or Q);
#X text 201 477 - resonator/filtered signal;
#X text 182 558 -q;
#X text 128 527 2) float - resonance (default 0) \, either in 'T60'
(default) or 'Q', f 66;
#X text 209 558 - sets resonance parameter to 'q';
#N canvas 437 34 843 347 resonantor 0;
#X text 33 14 Resonator:;
#X obj 72 130 noise~;
#X obj 72 184 *~;
#X obj 72 275 else/out~;
#X obj 87 158 else/pulse~ 0.5 0.25;
#X obj 72 232 else/resonant~ 400 1000;
#X obj 240 233 else/resonant~ 700 2000;
#X text 33 43 The Q parameter affecting the gain of the filter makes
it so that it acts as a 'resonator' \, where it will resonate at the
resonant frequency for a period of time after the input signal has
ceased.;
#X text 449 180 Thus \, instead of a 'q' factor \, the resonant parameter
can be specified by a decay time \, which is the default parameter
for the [resonant~] object.;
#X text 449 233 The decay time is given in "T60" \, which is the time
it takes to decay 60 dB. You can convert from decay time to Q and vice
versa with a formula implemented in the subpatch below.;
#X obj 533 100 else/out~;
#X obj 554 68 else/resonant~ 1000 1000;
#X obj 554 40 else/dust~ 5;
#X text 642 40 random excitation;
#N canvas 521 103 452 512 T60 0;
#X obj 292 308 pi;
#X obj 292 282 else/pi;
#X obj 184 156 / 1000;
#X obj 184 210 expr log(1000) / ($f1 * pi);
#X obj 184 181 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X text 243 182 decay time in seconds;
#X obj 184 239 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X text 246 238 bandwidth in hertz;
#X obj 169 268 /;
#X obj 115 183 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 1000 256;
#X obj 169 294 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X text 228 292 Q;
#X obj 115 108 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X text 173 107 decay time in miliseconds;
#X obj 115 131 t bang float;
#X text 64 183 center;
#X text 53 203 frequency;
#X obj 154 331 /;
#X obj 154 357 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X obj 142 242 t f f;
#X text 213 358 bandwidth in hertz;
#X obj 154 385 expr log(1000) / ($f1 * pi);
#X obj 154 415 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X text 213 416 decay time in seconds;
#X obj 154 437 * 1000;
#X obj 154 462 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X text 212 461 decay time in miliseconds;
#X obj 33 122 loadbang;
#X msg 33 146 set 1000;
#X msg 115 84 2000;
#X obj 115 60 bng 17 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X text 67 22 Converting from decay time to Q and vice-versa;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 6 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 19 0;
#X connect 10 0 17 1;
#X connect 12 0 14 0;
#X connect 14 0 9 0;
#X connect 14 1 2 0;
#X connect 17 0 18 0;
#X connect 18 0 21 0;
#X connect 19 0 17 0;
#X connect 19 1 8 0;
#X connect 21 0 22 0;
#X connect 22 0 24 0;
#X connect 24 0 25 0;
#X connect 27 0 28 0;
#X connect 28 0 9 0;
#X connect 29 0 12 0;
#X connect 30 0 29 0;
#X restore 567 298 pd T60 and Q conversion;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 2 0 6 0;
#X connect 4 0 2 1;
#X connect 5 0 3 0;
#X connect 6 0 3 1;
#X connect 11 0 10 0;
#X connect 11 0 10 1;
#X connect 12 0 11 0;
#X restore 462 286 pd resonantor;
#N canvas 835 161 411 574 [bandpass~]_vs_[resonant~] 0;
#X text 27 12 If you compare the filter response of both [bandpass~]
and [resonant~] \, you may notice how similar they are. In fact \,
the only difference is that [bandpass~] will have an automatic gain
adjustment so the maximum gain value is constantly at 0 dB!;
#X text 29 91 Therefore \, we can describe [bandpass~] as being a "constant
gain filter" \, whereas [resonant~] is a constant skirt filter.;
#X obj 103 136 else/imp~ 1;
#X obj 104 421 else/out~;
#X obj 191 224 else/out~;
#X obj 191 192 else/bandpass~ 1000 1000;
#X obj 104 384 else/resonant~ 1000 1000 -q;
#X text 297 240 <= we hear nothing, f 10;
#X text 220 443 <= we hear the resonance;
#X obj 131 225 else/meter~;
#X obj 42 426 else/meter~;
#X connect 2 0 5 0;
#X connect 2 0 6 0;
#X connect 5 0 4 0;
#X connect 5 0 4 1;
#X connect 5 0 9 0;
#X connect 6 0 3 0;
#X connect 6 0 3 1;
#X connect 6 0 10 0;
#X restore 366 261 pd [bandpass~]_vs_[resonant~];
#X msg 159 180 clear;
#X obj 216 217 else/resonant~ 500 5000;
#X text 55 218 resonating at 500 Hz ==> decaying 60dB in 5000 ms,
f 24;
#X connect 35 0 51 0;
#X connect 36 0 35 0;
#X connect 50 0 51 0;
#X connect 51 0 8 0;
#X connect 51 0 8 1;
