#N canvas 448 240 472 224 10;
#X obj 112 163 outlet;
#X obj 112 33 inlet;
#X obj 187 33 inlet;
#X obj 187 163 outlet;
#X text 233 85 Part of ELSE \; https://github.com/porres/pd-else;
#X text 235 66 Alexandre Torres Porres (2018);
#N canvas 428 171 513 522 monophonic 0;
#X obj 177 484 outlet;
#X obj 234 484 outlet;
#X obj 177 434 else/changed;
#X obj 69 9 inlet;
#X obj 330 9 inlet;
#X obj 69 38 poly 10 1, f 44;
#X obj 58 395 pack f 0;
#X msg 126 350 0;
#X obj 126 373 v i_\$0;
#X obj 106 212 symbol notes_\$0;
#X obj 69 182 symbol order_\$0;
#X obj 58 370 v last_\$0;
#X obj 69 133 select 0 1 2, f 19;
#X obj 106 266 array max;
#X obj 177 404 pack float float;
#X obj 177 370 expr notes_\$0[$f1] \; velocities_\$0[$f1];
#X obj 177 347 v idx_\$0;
#X obj 288 260 sel 1;
#X msg 305 159 128;
#X obj 305 180 v low_\$0;
#X obj 172 182 else/loop 10;
#X obj 172 158 trigger bang bang;
#X msg 271 187 0;
#X obj 106 291 > 0;
#X obj 106 320 sel 0 1;
#X obj 106 241 t b s;
#X obj 288 282 expr 1 \; low_\$0 = $f2 \; idx_\$0 = $f3;
#X obj 397 291 v note_\$0;
#X obj 256 281 f;
#X obj 69 65 expr mode_\$0 \; order_\$0[$f1-1] = (i_\$0 = i_\$0+1)
* ($f3>0) \; notes_\$0[$f1-1] = $f2 * ($f3>0) \; velocities_\$0[$f1-1]
= $f3 \; last_\$0 = $f2;
#X obj 308 382 loadbang;
#X msg 308 406 set 0 0;
#X obj 177 459 unpack f f;
#X obj 288 217 expr note_\$0>0 && note_\$0<low_\$0 \; notes_\$0[$f1]
\; $f1;
#X obj 58 347 t b b;
#X connect 2 0 32 0;
#X connect 3 0 5 0;
#X connect 4 0 5 1;
#X connect 5 0 29 0;
#X connect 5 1 29 1;
#X connect 5 2 29 2;
#X connect 6 0 2 0;
#X connect 7 0 8 0;
#X connect 9 0 25 0;
#X connect 10 0 25 0;
#X connect 11 0 6 0;
#X connect 12 0 10 0;
#X connect 12 1 9 0;
#X connect 12 2 21 0;
#X connect 13 0 23 0;
#X connect 13 1 16 0;
#X connect 14 0 2 0;
#X connect 15 0 14 0;
#X connect 15 1 14 1;
#X connect 16 0 15 0;
#X connect 17 0 26 0;
#X connect 18 0 19 0;
#X connect 20 0 33 0;
#X connect 20 1 28 0;
#X connect 21 0 20 0;
#X connect 21 1 22 0;
#X connect 21 1 18 0;
#X connect 22 0 28 1;
#X connect 23 0 24 0;
#X connect 24 0 34 0;
#X connect 24 1 16 0;
#X connect 25 0 13 0;
#X connect 25 1 13 2;
#X connect 26 0 28 1;
#X connect 28 0 24 0;
#X connect 29 0 12 0;
#X connect 30 0 31 0;
#X connect 31 0 2 0;
#X connect 32 0 0 0;
#X connect 32 1 1 0;
#X connect 33 0 17 0;
#X connect 33 1 26 1;
#X connect 33 1 27 0;
#X connect 33 2 26 2;
#X connect 34 0 11 0;
#X connect 34 1 7 0;
#X restore 112 107 pd monophonic;
#N canvas 142 160 305 347 retrigger 1;
#X obj 57 33 inlet;
#X obj 148 292 outlet;
#X obj 57 190 f;
#X obj 148 247 f;
#X obj 57 64 trigger bang float;
#X obj 57 94 v retrig_\$0;
#X obj 113 173 v i_\$0;
#X obj 113 219 sel 1;
#X obj 57 118 sel 0 1;
#X obj 113 196 < 2;
#X connect 0 0 4 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 1 2 1;
#X connect 4 1 3 1;
#X connect 5 0 8 0;
#X connect 6 0 9 0;
#X connect 7 0 3 0;
#X connect 8 0 2 0;
#X connect 8 1 6 0;
#X connect 9 0 7 0;
#X restore 187 134 pd retrigger;
#N canvas 33 23 361 270 route 0;
#X obj 108 88 clip 0 2;
#X obj 108 114 v mode_\$0;
#X obj 39 109 != 0;
#X obj 39 138 v retrig_\$0;
#X obj 178 204 outlet;
#X obj 39 27 inlet;
#X obj 39 62 route retrigger mode float list, f 47;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 0 0;
#X connect 6 2 4 0;
#X connect 6 3 4 0;
#X restore 112 75 pd route;
#N canvas 379 285 692 210 init 0;
#X obj 16 55 else/args;
#X msg 16 127 0;
#X msg 57 127 1;
#X msg 98 127 2;
#X obj 16 160 v mode_\$0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array notes_\$0 10 float 2;
#X coords 0 127 10 0 150 100 1 0 0;
#X restore 206 47 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array velocities_\$0 10 float 2;
#X coords 0 127 10 0 150 100 1 0 0;
#X restore 361 47 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array order_\$0 10 float 2;
#X coords 0 127 10 0 150 100 1 0 0;
#X restore 515 47 graph;
#X obj 16 31 loadbang;
#X obj 16 78 else/break -;
#X obj 16 101 route -last -high -low float;
#X obj 139 128 != 0;
#X obj 139 160 v retrig_\$0;
#X connect 0 0 9 0;
#X connect 1 0 4 0;
#X connect 2 0 4 0;
#X connect 3 0 4 0;
#X connect 8 0 0 0;
#X connect 9 0 10 0;
#X connect 10 0 1 0;
#X connect 10 1 2 0;
#X connect 10 2 3 0;
#X connect 10 3 11 0;
#X connect 11 0 12 0;
#X restore 31 85 pd init \; tables;
#X connect 1 0 8 0;
#X connect 2 0 6 1;
#X connect 6 0 0 0;
#X connect 6 1 7 0;
#X connect 7 0 3 0;
#X connect 8 0 6 0;
